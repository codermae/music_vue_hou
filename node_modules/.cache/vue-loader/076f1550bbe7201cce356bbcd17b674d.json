{"remainingRequest":"D:\\maey\\music_vue\\hout\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\maey\\music_vue\\hout\\vue-admin-template\\src\\views\\form\\menu2\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\maey\\music_vue\\hout\\vue-admin-template\\src\\views\\form\\menu2\\index.vue","mtime":1728504170917},{"path":"D:\\maey\\music_vue\\hout\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\maey\\music_vue\\hout\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\maey\\music_vue\\hout\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\maey\\music_vue\\hout\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGRlbEl0ZW0sIGdldExpc3QsdXBkYXRlSXRlbSB9IGZyb20gJ0AvYXBpL2Zvcm0nCmltcG9ydCBTb25nU2VhcmNoIGZyb20gJ0AvY29tcG9uZW50cy9TZWFyY2gnCmltcG9ydCAqIGFzIFhMU1ggZnJvbSAneGxzeCcKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOnsKICAgIFNvbmdTZWFyY2gKICB9LAogIGZpbHRlcnM6IHsKICAgIHN0YXR1c0ZpbHRlcihzdGF0dXMpIHsKICAgICAgY29uc3Qgc3RhdHVzTWFwID0gewogICAgICAgIHB1Ymxpc2hlZDogJ3N1Y2Nlc3MnLAogICAgICAgIGRyYWZ0OiAnZ3JheScsCiAgICAgICAgZGVsZXRlZDogJ2RhbmdlcicKICAgICAgfQogICAgICByZXR1cm4gc3RhdHVzTWFwW3N0YXR1c10KICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0OiBudWxsLAogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwKICAgICAgZGlhbG9nVmlzaWJsZTpmYWxzZSwKICAgICAgZGVsRGlhbG9nVmlzaWJsZTpmYWxzZSwKICAgICAgc2VsZWN0ZWRSb3c6bnVsbCwKICAgICAgZm9ybURhdGE6e30sCiAgICAgIGZvcm1MYWJlbFdpZHRoOiAnMTIwcHgnLAogICAgICBzZWFyY2hRdWVyeTonJywKICAgICAgZmlsdGVyZWRMaXN0OltdCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGEoKQogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hEYXRhKCkgewogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZQogICAgICBnZXRMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UpCiAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YQogICAgICAgIHRoaXMuZmlsdGVyZWRMaXN0ID0gdGhpcy5saXN0CiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlRWRpdChyb3cpewogICAgICB0aGlzLmZvcm1EYXRhID0gey4uLnJvd30KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgfSwKICAgIGhhbmRsZURlbChyb3cpewogICAgICB0aGlzLnNlbGVjdGVkUm93ID0gcm93OwogICAgICB0aGlzLmRlbERpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGNhbmNlbERlbCgpewogICAgICB0aGlzLmRlbERpYWxvZ1Zpc2libGU9ZmFsc2U7CiAgICB9LAogICAgY29uZmlybURlbCgpewogICAgICBkZWxJdGVtKHRoaXMuc2VsZWN0ZWRSb3cuYXJ0aXN0X2lkKS50aGVuKCgpPT57CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScKICAgICAgICB9KQogICAgICAgIHRoaXMubGlzdCA9IHRoaXMubGlzdC5maWx0ZXIoaXRlbSA9PiBpdGVtLmFydGlzdF9pZCAhPT0gdGhpcy5zZWxlY3RlZFJvdy5hcnRpc3RfaWQpOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcignREVMRVRFIEZBSUxFRCcsZXJyb3IpCiAgICAgIH0pOwogICAgICB0aGlzLmRlbERpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zZWxlY3RlZFJvdykKICAgIH0sCiAgICBzYXZlQ2hhbmdlcygpewogICAgICAvL+S/ruaUueeUqOaIt+S/oeaBrwogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZvcm1EYXRhKTsKICAgICAgdXBkYXRlSXRlbSh0aGlzLmZvcm1EYXRhLmFydGlzdF9pZCx0aGlzLmZvcm1EYXRhKS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6ICfkv67mlLnmiJDlip8hJwogICAgICAgIH0pCiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgdGhpcy5mZXRjaERhdGEoKTsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VQREFURSBGQUlMRUQnLGVycm9yKQogICAgICB9KQogICAgfSwKICAgIGZpbHRlckFydGlzdChxdWVyeSl7CiAgICAgIGlmKHF1ZXJ5LnRyaW0oKSA9PT0gJycpewogICAgICAgIHRoaXMuZmlsdGVyZWRMaXN0ID0gdGhpcy5saXN0OwogICAgICB9ZWxzZSB7CiAgICAgICAgdGhpcy5maWx0ZXJlZExpc3QgPSB0aGlzLmxpc3QuZmlsdGVyKGl0ZW0gPT4gaXRlbS5hcnRpc3RfbmFtZS5pbmNsdWRlcyhxdWVyeSkpCiAgICAgIH0KICAgIH0sCiAgICBleHBvcnRFeGNlbCgpewogICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOwogICAgICBjb25zdCB5ZWFyID0gbm93LmdldEZ1bGxZZWFyKCk7CiAgICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgY29uc3QgZGF5ID0gU3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgIGNvbnN0IGhvdXJzID0gU3RyaW5nKG5vdy5nZXRIb3VycygpKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICBjb25zdCBtaW51dGVzID0gU3RyaW5nKG5vdy5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgIGNvbnN0IHNlY29uZHMgPSBTdHJpbmcobm93LmdldFNlY29uZHMoKSkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgY29uc3QgZm9ybWF0dGVkVGltZSA9IGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fV8ke2hvdXJzfS0ke21pbnV0ZXN9LSR7c2Vjb25kc31gOwogICAgICAvLyBjb25zb2xlLmxvZyhg5q2M5puy5pWw5o2uXyR7Zm9ybWF0dGVkVGltZX0ueGxzeGApCiAgICAgIGNvbnN0IHdzID0gWExTWC51dGlscy5qc29uX3RvX3NoZWV0KHRoaXMuZmlsdGVyZWRMaXN0KQogICAgICBjb25zdCB3YiA9IFhMU1gudXRpbHMuYm9va19uZXcoKQogICAgICBYTFNYLnV0aWxzLmJvb2tfYXBwZW5kX3NoZWV0KHdiLHdzLCdzaGVldDEnKQogICAgICBYTFNYLndyaXRlRmlsZSh3Yixg5q2M5omL5pWw5o2uXyR7Zm9ybWF0dGVkVGltZX0ueGxzeGApCiAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICBtZXNzYWdlOiAn5a+85Ye65oiQ5YqfIScKICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/form/menu2","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <song-search placeholder=\"请输入歌手名\" v-model=\"searchQuery\" @search=\"filterArtist\"></song-search>\n    <el-button @click=\"exportExcel\" type=\"primary\" style=\"margin-left: 10px\" >导出Excel</el-button>\n    <el-table\n      v-loading=\"listLoading\"\n      :data=\"filteredList\"\n      element-loading-text=\"Loading\"\n      border\n      fit\n      highlight-current-row\n    >\n      <el-table-column align=\"center\" label=\"ID\" width=\"50\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.artist_id }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"姓名\" width=\"110\" align=\"center\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.artist_name }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"国籍\" width=\"110\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.nationality }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"头像\" width=\"150\" align=\"center\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.image_url }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"网站\" width=\"150\" align=\"center\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.official_website }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"简介\" width=\"450\" align=\"center\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.biography }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"110\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <button @click=\"handleEdit(scope.row)\">编辑</button>\n          <button @click=\"handleDel(scope.row)\">删除</button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog title=\"编辑数据\" :visible.sync=\"dialogVisible\" width=\"50%\">\n      <el-form :model=\"formData\" style=\"margin-bottom: 0;\">\n            <el-form-item label=\"ID\" :label-width=\"formLabelWidth\">\n              <el-input v-model=\"formData.artist_id\" disabled></el-input>\n            </el-form-item>\n            <el-form-item label=\"姓名\" :label-width=\"formLabelWidth\">\n              <el-input v-model=\"formData.artist_name\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"国籍\" :label-width=\"formLabelWidth\">\n              <el-input v-model=\"formData.nationality\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"头像地址\" :label-width=\"formLabelWidth\">\n              <el-input v-model=\"formData.image_url\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"网站\" :label-width=\"formLabelWidth\">\n              <el-input v-model=\"formData.official_website\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"简介\" :label-width=\"formLabelWidth\">\n              <el-input v-model=\"formData.biography\"></el-input>\n            </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"saveChanges\">保 存</el-button>\n      </div>\n    </el-dialog>\n    <el-dialog title=\"确认删除\" :visible.sync=\"delDialogVisible\" width=\"30%\">\n      <span>确定要删除账号吗</span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"cancelDel\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmDel\">确定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { delItem, getList,updateItem } from '@/api/form'\nimport SongSearch from '@/components/Search'\nimport * as XLSX from 'xlsx'\n\nexport default {\n  components:{\n    SongSearch\n  },\n  filters: {\n    statusFilter(status) {\n      const statusMap = {\n        published: 'success',\n        draft: 'gray',\n        deleted: 'danger'\n      }\n      return statusMap[status]\n    }\n  },\n  data() {\n    return {\n      list: null,\n      listLoading: true,\n      dialogVisible:false,\n      delDialogVisible:false,\n      selectedRow:null,\n      formData:{},\n      formLabelWidth: '120px',\n      searchQuery:'',\n      filteredList:[]\n    }\n  },\n  created() {\n    this.fetchData()\n  },\n  methods: {\n    fetchData() {\n      this.listLoading = true\n      getList().then(response => {\n        // console.log(response)\n        this.list = response.data\n        this.filteredList = this.list\n        this.listLoading = false\n      })\n    },\n    handleEdit(row){\n      this.formData = {...row}\n      this.dialogVisible = true\n    },\n    handleDel(row){\n      this.selectedRow = row;\n      this.delDialogVisible = true;\n    },\n    cancelDel(){\n      this.delDialogVisible=false;\n    },\n    confirmDel(){\n      delItem(this.selectedRow.artist_id).then(()=>{\n        this.$message({\n          type: 'success',\n          message: '删除成功!'\n        })\n        this.list = this.list.filter(item => item.artist_id !== this.selectedRow.artist_id);\n      }).catch(error => {\n        console.error('DELETE FAILED',error)\n      });\n      this.delDialogVisible = false;\n      // console.log(this.selectedRow)\n    },\n    saveChanges(){\n      //修改用户信息\n      // console.log(this.formData);\n      updateItem(this.formData.artist_id,this.formData).then(() => {\n        this.$message({\n          type: 'success',\n          message: '修改成功!'\n        })\n        this.dialogVisible = false;\n        this.fetchData();\n      }).catch(error => {\n        console.error('UPDATE FAILED',error)\n      })\n    },\n    filterArtist(query){\n      if(query.trim() === ''){\n        this.filteredList = this.list;\n      }else {\n        this.filteredList = this.list.filter(item => item.artist_name.includes(query))\n      }\n    },\n    exportExcel(){\n      const now = new Date();\n      const year = now.getFullYear();\n      const month = String(now.getMonth() + 1).padStart(2, '0');\n      const day = String(now.getDate()).padStart(2, '0');\n      const hours = String(now.getHours()).padStart(2, '0');\n      const minutes = String(now.getMinutes()).padStart(2, '0');\n      const seconds = String(now.getSeconds()).padStart(2, '0');\n      const formattedTime = `${year}-${month}-${day}_${hours}-${minutes}-${seconds}`;\n      // console.log(`歌曲数据_${formattedTime}.xlsx`)\n      const ws = XLSX.utils.json_to_sheet(this.filteredList)\n      const wb = XLSX.utils.book_new()\n      XLSX.utils.book_append_sheet(wb,ws,'sheet1')\n      XLSX.writeFile(wb,`歌手数据_${formattedTime}.xlsx`)\n      this.$message({\n        type: 'success',\n        message: '导出成功!'\n      })\n    }\n  }\n}\n</script>\n<style scoped>\n  ::v-deep .el-dialog {\n    margin-top: 7vh !important;\n  }\n  .el-dialog__body {\n    padding: 20px 20px 10px;\n  }\n\n  .el-form-item {\n    margin-bottom: 5px;\n  }\n\n  .el-button--primary {\n    background-color: red;\n    border-color: red;\n  }\n</style>\n"]}]}