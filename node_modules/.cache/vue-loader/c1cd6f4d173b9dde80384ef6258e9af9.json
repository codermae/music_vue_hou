{"remainingRequest":"D:\\maey\\music_vue\\hout\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\maey\\music_vue\\hout\\vue-admin-template\\src\\views\\table\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\maey\\music_vue\\hout\\vue-admin-template\\src\\views\\table\\index.vue","mtime":1728308547000},{"path":"D:\\maey\\music_vue\\hout\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\maey\\music_vue\\hout\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\maey\\music_vue\\hout\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\maey\\music_vue\\hout\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldExpc3QsdXBkYXRlSXRlbSB9IGZyb20gJ0AvYXBpL3RhYmxlJwoKZXhwb3J0IGRlZmF1bHQgewogIGZpbHRlcnM6IHsKICAgIHN0YXR1c0ZpbHRlcihzdGF0dXMpIHsKICAgICAgY29uc3Qgc3RhdHVzTWFwID0gewogICAgICAgIHB1Ymxpc2hlZDogJ3N1Y2Nlc3MnLAogICAgICAgIGRyYWZ0OiAnZ3JheScsCiAgICAgICAgZGVsZXRlZDogJ2RhbmdlcicKICAgICAgfQogICAgICByZXR1cm4gc3RhdHVzTWFwW3N0YXR1c10KICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0OiBudWxsLAogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwKICAgICAgZGlhbG9nVmlzaWJsZTpmYWxzZSwKICAgICAgZm9ybURhdGE6e30sCiAgICAgIGZvcm1MYWJlbFdpZHRoOiAnMTIwcHgnCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGEoKQogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hEYXRhKCkgewogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZQogICAgICBnZXRMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpCiAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YQogICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUVkaXQocm93KXsKICAgICAgdGhpcy5mb3JtRGF0YSA9IHsuLi5yb3d9CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgIH0sCiAgICBoYW5kbGVEZWwoKXsKICAgICAgLy/liKDpmaTnlKjmiLcKICAgIH0sCiAgICBzYXZlQ2hhbmdlcygpewogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZvcm1EYXRhKQogICAgICAvLyB0aGlzLnJlbW92ZUZpZWxkcyh0aGlzLmZvcm1EYXRhLFsncmVnaXN0X2RhdGUnLCd1cGRhdGVfZGF0ZSddKQogICAgICBjb25zb2xlLmxvZyh0aGlzLnJlbW92ZUZpZWxkcyh0aGlzLmZvcm1EYXRhLFsncmVnaXN0X2RhdGUnLCd1cGRhdGVfZGF0ZSddKSkKICAgICAgLy/kv67mlLnnlKjmiLfkv6Hmga8KICAgICAgdXBkYXRlSXRlbSh0aGlzLmZvcm1EYXRhLnVzZXJfaWQsdGhpcy5yZW1vdmVGaWVsZHModGhpcy5mb3JtRGF0YSxbJ3JlZ2lzdF9kYXRlJywndXBkYXRlX2RhdGUnXSkpLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueaIkOWKnyEnCiAgICAgICAgfSkKICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICB0aGlzLmZldGNoRGF0YSgpOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcignVVBEQVRFIEZBSUxFRCcsZXJyb3IpCiAgICAgIH0pCiAgICB9LAogICAgcmVtb3ZlRmllbGRzKG9iaixmaWVsZHNUb1JlbW92ZSl7CiAgICAgIGNvbnN0IG5ld09iaiA9IHsuLi5vYmp9OwogICAgICBmaWVsZHNUb1JlbW92ZS5mb3JFYWNoKGZpZWxkID0+IHsKICAgICAgICBkZWxldGUgbmV3T2JqW2ZpZWxkXTsKICAgICAgfSk7CiAgICAgIHJldHVybiBuZXdPYmo7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/table","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-table\n      v-loading=\"listLoading\"\n      :data=\"list\"\n      element-loading-text=\"Loading\"\n      border\n      fit\n      highlight-current-row\n    >\n      <el-table-column align=\"center\" label=\"ID\" width=\"50\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.user_id }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"用户名\" width=\"110\" align=\"center\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.username }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"密码\" width=\"110\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.password_hash }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"手机号\" width=\"110\" align=\"center\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.mobile }}\n        </template>\n      </el-table-column>\n      <el-table-column class-name=\"status-col\" label=\"权限\" width=\"75\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-tag :type=\"scope.row.status | statusFilter\">{{ scope.row.privilege }}</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"created_at\" label=\"注册时间\" width=\"200\">\n        <template slot-scope=\"scope\">\n          <i class=\"el-icon-time\" />\n          <span>{{ scope.row.regist_date }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"created_at\" label=\"修改时间\" width=\"200\">\n        <template slot-scope=\"scope\">\n          <i class=\"el-icon-time\" />\n          <span>{{ scope.row.update_date }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"110\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <button @click=\"handleEdit(scope.row)\">编辑</button>\n          <button @click=\"handleDel(scope.row)\">删除</button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog title=\"编辑数据\" :visible.sync=\"dialogVisible\" width=\"50%\">\n      <el-form :model=\"formData\" style=\"margin-bottom: 0;\">\n        <el-table-column align=\"center\" label=\"ID\" width=\"50\">\n            <el-form-item label=\"ID\" :label-width=\"formLabelWidth\">\n              <el-input v-model=\"formData.user_id\" disabled></el-input>\n            </el-form-item>\n        </el-table-column>\n        <el-table-column label=\"用户名\" width=\"110\" align=\"center\">\n            <el-form-item label=\"用户名\" :label-width=\"formLabelWidth\">\n              <el-input v-model=\"formData.username\"></el-input>\n            </el-form-item>\n        </el-table-column>\n        <el-table-column label=\"密码\" width=\"110\" align=\"center\">\n            <el-form-item label=\"密码\" :label-width=\"formLabelWidth\">\n              <el-input v-model=\"formData.password_hash\"></el-input>\n            </el-form-item>\n        </el-table-column>\n        <el-table-column label=\"手机号\" width=\"110\" align=\"center\">\n            <el-form-item label=\"手机号\" :label-width=\"formLabelWidth\">\n              <el-input v-model=\"formData.mobile\"></el-input>\n            </el-form-item>\n        </el-table-column>\n        <el-table-column class-name=\"status-col\" label=\"权限\" width=\"75\" align=\"center\">\n            <el-form-item label=\"权限\" :label-width=\"formLabelWidth\">\n              <el-radio-group v-model=\"formData.privilege\">\n                <el-radio label=\"admin\">Admin</el-radio>\n                <el-radio label=\"root\">Root</el-radio>\n              </el-radio-group>\n            </el-form-item>\n        </el-table-column>\n        <el-table-column align=\"center\" prop=\"created_at\" label=\"注册时间\" width=\"200\">\n            <el-form-item label=\"注册时间\" :label-width=\"formLabelWidth\">\n              <el-input v-model=\"formData.regist_date\" disabled></el-input>\n            </el-form-item>\n        </el-table-column>\n        <el-table-column align=\"center\" prop=\"created_at\" label=\"修改时间\" width=\"200\">\n            <el-form-item label=\"修改时间\" :label-width=\"formLabelWidth\">\n              <el-input v-model=\"formData.update_date\" disabled></el-input>\n            </el-form-item>\n        </el-table-column>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"saveChanges\">保 存</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { getList,updateItem } from '@/api/table'\n\nexport default {\n  filters: {\n    statusFilter(status) {\n      const statusMap = {\n        published: 'success',\n        draft: 'gray',\n        deleted: 'danger'\n      }\n      return statusMap[status]\n    }\n  },\n  data() {\n    return {\n      list: null,\n      listLoading: true,\n      dialogVisible:false,\n      formData:{},\n      formLabelWidth: '120px'\n    }\n  },\n  created() {\n    this.fetchData()\n  },\n  methods: {\n    fetchData() {\n      this.listLoading = true\n      getList().then(response => {\n        console.log(response)\n        this.list = response.data\n        this.listLoading = false\n      })\n    },\n    handleEdit(row){\n      this.formData = {...row}\n      this.dialogVisible = true\n    },\n    handleDel(){\n      //删除用户\n    },\n    saveChanges(){\n      // console.log(this.formData)\n      // this.removeFields(this.formData,['regist_date','update_date'])\n      console.log(this.removeFields(this.formData,['regist_date','update_date']))\n      //修改用户信息\n      updateItem(this.formData.user_id,this.removeFields(this.formData,['regist_date','update_date'])).then(() => {\n        this.$message({\n          type: 'success',\n          message: '修改成功!'\n        })\n        this.dialogVisible = false;\n        this.fetchData();\n      }).catch(error => {\n        console.error('UPDATE FAILED',error)\n      })\n    },\n    removeFields(obj,fieldsToRemove){\n      const newObj = {...obj};\n      fieldsToRemove.forEach(field => {\n        delete newObj[field];\n      });\n      return newObj;\n    }\n  }\n}\n</script>\n<style scoped>\n  ::v-deep .el-dialog {\n    margin-top: 7vh !important;\n  }\n  .el-dialog__body {\n    padding: 20px 20px 10px;\n  }\n\n  .el-form-item {\n    margin-bottom: 5px;\n  }\n</style>\n"]}]}