{"remainingRequest":"D:\\maey\\music_vue\\hout\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js!D:\\maey\\music_vue\\hout\\vue-admin-template\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\maey\\music_vue\\hout\\vue-admin-template\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\maey\\music_vue\\hout\\vue-admin-template\\src\\store\\modules\\user.js","mtime":1729068163416},{"path":"D:\\maey\\music_vue\\hout\\vue-admin-template\\babel.config.js","mtime":1728097319034},{"path":"D:\\maey\\music_vue\\hout\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\maey\\music_vue\\hout\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\maey\\music_vue\\hout\\vue-admin-template\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiwgbG9nb3V0IGFzIF9sb2dvdXQsIGdldEluZm8gYXMgX2dldEluZm8gfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCB7IHJlc2V0Um91dGVyIH0gZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC11aSc7CnZhciBnZXREZWZhdWx0U3RhdGUgPSBmdW5jdGlvbiBnZXREZWZhdWx0U3RhdGUoKSB7CiAgcmV0dXJuIHsKICAgIHRva2VuOiBnZXRUb2tlbigpLAogICAgbmFtZTogJycsCiAgICBhdmF0YXI6ICcnLAogICAgY3VycmVudE5hbWU6ICcnCiAgfTsKfTsKdmFyIHN0YXRlID0gZ2V0RGVmYXVsdFN0YXRlKCk7CnZhciBnZXR0ZXJzID0gewogIGdldEN1cnJlbnROYW1lOiBmdW5jdGlvbiBnZXRDdXJyZW50TmFtZShzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmN1cnJlbnROYW1lOwogIH0KfTsKdmFyIG11dGF0aW9ucyA9IHsKICBSRVNFVF9TVEFURTogZnVuY3Rpb24gUkVTRVRfU1RBVEUoc3RhdGUpIHsKICAgIE9iamVjdC5hc3NpZ24oc3RhdGUsIGdldERlZmF1bHRTdGF0ZSgpKTsKICB9LAogIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9LAogIFNFVF9OQU1FOiBmdW5jdGlvbiBTRVRfTkFNRShzdGF0ZSwgbmFtZSkgewogICAgc3RhdGUubmFtZSA9IG5hbWU7CiAgfSwKICBTRVRfQVZBVEFSOiBmdW5jdGlvbiBTRVRfQVZBVEFSKHN0YXRlLCBhdmF0YXIpIHsKICAgIHN0YXRlLmF2YXRhciA9IGF2YXRhcjsKICB9LAogIFNFVF9DVVJSRU5UTkFNRTogZnVuY3Rpb24gU0VUX0NVUlJFTlROQU1FKHN0YXRlLCBuYW1lKSB7CiAgICBzdGF0ZS5jdXJyZW50TmFtZSA9IG5hbWU7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICBjaGFuZ2VDdXJyZW50TmFtZTogZnVuY3Rpb24gY2hhbmdlQ3VycmVudE5hbWUoX3JlZiwgbmFtZSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgY29tbWl0KCdTRVRfQ1VSUkVOVE5BTUUnLCBuYW1lKTsKICB9LAogIC8vIHVzZXIgbG9naW4KICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZjIsIHVzZXJJbmZvKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgdmFyIHVzZXJuYW1lID0gdXNlckluZm8udXNlcm5hbWUsCiAgICAgIHBhc3N3b3JkID0gdXNlckluZm8ucGFzc3dvcmQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfbG9naW4oewogICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZS50cmltKCksCiAgICAgICAgcGFzc3dvcmRfaGFzaDogcGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgICAvLyBJZiB1bmF1dGhvcml6ZWQsIGhhbmRsZSBpdCBncmFjZWZ1bGx5CiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgPT09IGZhbHNlKSB7CiAgICAgICAgICBNZXNzYWdlLmVycm9yKCfnmbvpmYblpLHotKXvvIzor7fmo4Dmn6XovpPlhaXkv6Hmga8nKTsKICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7IC8vIFJlc29sdmUgdG8gYXZvaWQgcmVqZWN0aW9uIGFuZCBjb25zb2xlIGVycm9yCiAgICAgICAgfQogICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBjb21taXQoJ1NFVF9DVVJSRU5UTkFNRScsIGRhdGEudXNlcm5hbWUpOwogICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgZGF0YS50b2tlbik7CiAgICAgICAgc2V0VG9rZW4oZGF0YS50b2tlbik7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAvLyBNZXNzYWdlLmVycm9yKCfnmbvpmYblpLHotKXvvIzor7fmo4Dmn6XovpPlhaXkv6Hmga8yJykKICAgICAgICBNZXNzYWdlLmVycm9yKGVycm9yLm1lc3NhZ2UpOwogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyBnZXQgdXNlciBpbmZvCiAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbyhfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgc3RhdGUgPSBfcmVmMy5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHN0YXRlKQogICAgICBfZ2V0SW5mbyhzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZygnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tZ2V0aW5mby0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJykKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgaWYgKCFkYXRhKSB7CiAgICAgICAgICByZXR1cm4gcmVqZWN0KCdWZXJpZmljYXRpb24gZmFpbGVkLCBwbGVhc2UgTG9naW4gYWdhaW4uJyk7CiAgICAgICAgfQogICAgICAgIHZhciBuYW1lID0gZGF0YS5uYW1lLAogICAgICAgICAgYXZhdGFyID0gZGF0YS5hdmF0YXI7CiAgICAgICAgY29tbWl0KCdTRVRfTkFNRScsIG5hbWUpOwogICAgICAgIGNvbW1pdCgnU0VUX0FWQVRBUicsIGF2YXRhcik7CiAgICAgICAgcmVzb2x2ZShkYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHVzZXIgbG9nb3V0CiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQsCiAgICAgIHN0YXRlID0gX3JlZjQuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfbG9nb3V0KHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZW1vdmVUb2tlbigpOyAvLyBtdXN0IHJlbW92ZSAgdG9rZW4gIGZpcnN0CiAgICAgICAgcmVzZXRSb3V0ZXIoKTsKICAgICAgICBjb21taXQoJ1JFU0VUX1NUQVRFJyk7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8gcmVtb3ZlIHRva2VuCiAgcmVzZXRUb2tlbjogZnVuY3Rpb24gcmVzZXRUb2tlbihfcmVmNSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY1LmNvbW1pdDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICByZW1vdmVUb2tlbigpOyAvLyBtdXN0IHJlbW92ZSAgdG9rZW4gIGZpcnN0CiAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucywKICBnZXR0ZXJzOiBnZXR0ZXJzCn07"},{"version":3,"names":["login","logout","getInfo","getToken","setToken","removeToken","resetRouter","Message","getDefaultState","token","name","avatar","currentName","state","getters","getCurrentName","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","SET_CURRENTNAME","actions","changeCurrentName","_ref","commit","_ref2","userInfo","username","password","Promise","resolve","reject","trim","password_hash","then","response","success","error","data","catch","message","_ref3","_ref4","resetToken","_ref5","namespaced"],"sources":["D:/maey/music_vue/hout/vue-admin-template/src/store/modules/user.js"],"sourcesContent":["import { login, logout, getInfo } from '@/api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport { resetRouter } from '@/router'\nimport { Message } from 'element-ui'\n\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: '',\n    avatar: '',\n    currentName:''\n  }\n}\n\nconst state = getDefaultState()\n\nconst getters = {\n  getCurrentName: state => state.currentName\n}\n\nconst mutations = {\n  RESET_STATE: (state) => {\n    Object.assign(state, getDefaultState())\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_CURRENTNAME: (state, name) => {\n    state.currentName = name\n  },\n}\n\nconst actions = {\n  changeCurrentName({ commit }, name) {\n    commit('SET_CURRENTNAME', name)\n  },\n  // user login\n  login({ commit }, userInfo) {\n    const { username, password } = userInfo\n    return new Promise((resolve, reject) => {\n      login({ username: username.trim(), password_hash: password }).then(response => {\n        // console.log(response)\n        // If unauthorized, handle it gracefully\n        if (response.success === false) {\n          Message.error('登陆失败，请检查输入信息');\n          return resolve(); // Resolve to avoid rejection and console error\n        }\n        const { data } = response\n        commit('SET_CURRENTNAME', data.username)\n        commit('SET_TOKEN', data.token)\n        setToken(data.token)\n        resolve()\n      })\n      .catch(error => {\n        // Message.error('登陆失败，请检查输入信息2')\n        Message.error(error.message);\n        reject(error)\n      })\n    })\n  },\n\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      // console.log(state)\n      getInfo(state.token).then(response => {\n        // console.log('------------------------getinfo-----------------------------')\n        // console.log(response)\n        const { data } = response\n\n        if (!data) {\n          return reject('Verification failed, please Login again.')\n        }\n\n        const { name, avatar } = data\n\n        commit('SET_NAME', name)\n        commit('SET_AVATAR', avatar)\n        resolve(data)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // user logout\n  logout({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      logout(state.token).then(() => {\n        removeToken() // must remove  token  first\n        resetRouter()\n        commit('RESET_STATE')\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken() // must remove  token  first\n      commit('RESET_STATE')\n      resolve()\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n  getters\n}\n\n"],"mappings":"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","ignoreList":[]}]}